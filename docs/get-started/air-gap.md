---
id: air-gap
title: 에어 갭 환경
sidebar_label: 에어 갭 환경
description: Secure your private keys on a network-free transaction host.
image: ../img/og/og-security-air-gap-environment.png
---

"에어 갭"은 원래 컴퓨터 또는 하위 네트워크가 "공기"로 둘러싸여 있어 데이터 케이블 연결이 안팎으로 되지 않고, 다른 컴퓨터 및 네트워크와 격리되는 것을 의미했습니다. 요즘에는 무선 기반 네트워크 연결(WiFi, Bluetooth 등)도 없는 것을 의미합니다.

개발자 및 Cardano 스테이크 풀 운영자는 일반적으로 지불 키, 스테이크 풀 키나 해커에게 공격 대상이 되는 다른 암호화 리소스들을 사용하기 위한 에어 갭 환경이 필요합니다.

일부 특수 하드웨어(예: 하드웨어 지갑)도 이 기능을 수행할 수 있습니다. 이러한 장치가 있다고 생각되면, 스테이크 풀 또는 개발을 위한 격리 기능을 제공하는지, *그리고* 이러한 기능을 사용하는데 자신있는지 확인하십시오.

그렇지 않다면, 일반적으로 이런 에어 갭 환경을 만들기 위해 **두 번째 컴퓨터가 필요**하며, 이 가이드의 나머지 부분이 이를 잘 설명할 것입니다.

:::tip Linux 베테랑 전용

추가 컴퓨터가 없거나, USB 드라이브에 독립 실행형 Linux 환경을 구축하려는 경우 [마지막 섹션](#옵션-2:-영구-USB-장치에-에어-갭-환경-설치)으로 건너뛰십시오.

:::

## 옵션 1: 독립형 컴퓨터에 에어 갭 환경 설치

### 올바른 컴퓨터 고르기

Mac보다 Intel PC에서 더 나은 결과를 얻을 수 있습니다.
  
  - Mac 부팅에는 여기서 다루기엔 너무 복잡한 특성이 존재합니다. 따라서, 이 문서의 나머지 부분에서는 Mac이 아닌 PC를 사용한다고 가정하겠습니다.

이 컴퓨터의 전체 디스크가 필요합니다.

  - 두 번째 드라이브는 실수로 악성 소프트웨어를 실행하지 않도록 모두 제거되어야 합니다. 
  - 80GB 정도면 Linux 설치 및 Cardano 지원 파일을 구축하는데 충분합니다.

오래된 기기를 사용해도 됩니다. 심지어 *아주* 오래된 것도 상관없습니다.

  - Linux는 대부분의 최신 시스템에서 잘 지원되지만, 이전 시스템에서 누락된 장치 드라이버가 있을 가능성이 적습니다. 따라서 최신 시스템보다 이전 시스템에서 더 잘 수행될 수 있습니다.
  - 이는 많은 개발자 및 SPO에게 적합합니다. 오래된 기기 혹은 손상된 소프트웨어가 있는 기기는 "에어 갭" 환경의 단일 목적에만 전념하기에 매우 적합하기 때문입니다.

### Ubuntu를 설치 OS로 사용

여기서 Ubuntu를 선택한 이유는 다음과 같습니다.

  - 이는 서버에서 일반적으로 선택하는 OS이므로, 스테이크 풀을 구축하는 경우 `cardano-cli` 바이너리를 에어 갭 기기에서 컴파일하는 대신 에어 갭 기기에 복사할 수 있는 옵션이 존재합니다.
  - Ubuntu 데스크톱 환경 및 명령어는 다른 어떤 Linux 버전보다 잘 문서화되어 있습니다. 에어 갭 기기 자체에 대한 도움말을 인터넷에서 검색할 수 없기 때문에, 도움을 받는 것은 가능한 한 쉬워야 한다는 점에서 Ubuntu는 매우 적합한 OS입니다.

이 가이드의 나머지 부분에서는 에어 갭 환경 OS에 대해 **Ubuntu**를 사용한다고 가정합니다. 다른 Linux 버전을 설치하는 경우 다음을 기억하십시오.

  - Ubuntu라는 용어를 사용하거나, 해당 설치 프로그램의 스크린샷이 표시될 때 선택한 Linux 버전에서 해당 항목을 찾으십시오.
  - 향후 Ubuntu보다 더 나은 선택지가 생길 수도 있습니다. Cardano 커뮤니티의 다른 사람들과 자유롭게 결과를 공유하고, 여기 개발자 포털 내에도 [contributing](../portal-contribute)을 통해 찾은 것들을 공유할 수 있습니다.

### Ubuntu 설치 지침 준비

다음 외부 링크에서 표준 Ubuntu 설치 단계를 확인하십시오: [Ubuntu Tutorials > Install Ubuntu desktop](https://ubuntu.com/tutorials/install-ubuntu-desktop)

#### 에어 갭 기기 내 파일을 암호화할지 여부를 미리 결정하세요.

Ubuntu 파일 시스템을 설정할 때, AES 알고리즘의 변형으로 전체 파티션의 내용을 암호화할 수 있도록 Volume Group을 설정하는 옵션이 제공됩니다.

:::caution

가지고 있는 컴퓨터 유형이나 OS 설치 프로그램이 있는 GRUB 소프트웨어 버전에 따라 부팅 및 UEFI 파티션이 암호화되지 않을 수 있습니다.

따라서 예방책으로 드라이브를 포맷하거나 설치 미디어로 기기를 구축하지 않은 경우 에어 갭 기기에 USB 드라이브를 연결하지 마십시오.

:::

에어 갭 시스템 암호화의 주요 이점

  - 누군가가 기기에 물리적으로 접근하거나 훔쳐도, 계정에 반하는(스테이크 풀 서약 훔치기 등) 행동을 방지하고 스테이크 풀 보안을 지킬 수 있습니다. 😎 

암호화의 주요 단점

  - 디스크 암호화 비밀번호를 분실하거나, 복제할 수 없는 것으로 잘못 설정하면 에어 갭 기기에 저장된 모든 계정 정보와 키를 포함하여 사실상 모든 데이터를 잃게 됩니다. 😖

#### (파티션을 암호화하는 경우의 옵션) 암호화 비밀번호 선택

권장 비밀번호 요구 사항

  - 인터넷으로 평문을 통해 전송되거나 저장되지 않았고, 컴퓨터 자체에 일반 텍스트로 저장된 적이 없는 것(에어 갭이 실수로 파손될 경우를 대비해)
  - 약 2^128 가지로 해시할 수 있을 만큼의 길이와 복잡성을 가진 것(적어도 20개가 넘는 길이어야 함)

### 표준 Ubuntu 설치 시작 (수정사항 포함)

표준 절차(위의 링크)를 따를 때, 아래 제목의 지점에서 잠깐 멈추고 에어 갭 환경을 올바르게 설치하고 있는지 확인하십시오.

시작하기 전에, 선택한 에어 갭 시스템을 인터넷에서 물리적으로 분리하거나 WiFi를 비활성화하기 위해 홈 라우터에 어떤 조치도 할 필요는 없습니다.

:::note

OS가 설치 및 패치되고 몇 개의 초기 패키지(Cardano CLI 포함)가 설치된 후에는 인터넷이 구성 해제되고 연결이 끊어집니다.

:::

### 다음을 따라하십시오: [Ubuntu Tutorials > Install Ubuntu desktop](https://ubuntu.com/tutorials/install-ubuntu-desktop)

... 특히 다음 단계에 주의를 기울이십시오.

#### 무선 (요청된 경우)

컴퓨터에 케이블 연결이 없는 경우, 당사의 보안 모델에 따라 OS 설치 중 WiFi 네트워크에 연결하는 것이 허용됩니다.

  - 입력한 무선 키는 설치된 시스템에 유지될 것이지만, 절차가 끝나기 전에 인터넷 연결을 끊으라는 알림이 표시됩니다.

#### 업데이트 및 기타

![img](../../static/img/get-started/air-gap/10-software-choices.png)

**Minimal installation**을 선택하십시오. 보안에 방해가 되는 어플리케이션이나 서비스를 남길 가능성이 가장 적기 때문입니다.

  - 보다 일반적인 설치 방법으로는, 인터넷 연결을 필요로 하는 클라우드 기반 서비스 및 게임이 있습니다.
  - LibreOffice 소프트웨어는 "Minimal" 패키지에 포함되어있진 않지만 나중에 추가해주는 것이 좋습니다(암호 및 니모닉 백업을 암호화하는 데 도움이 되므로).

스파이웨어의 위험이 있으므로, **third-party software for graphics and WiFi** 옵션은 **선택하지 마십시오**. 

  - 독점 그래픽 드라이버의 성능 향상 없이도 충분히 높은 해상도를 유지할 수 있습니다(그렇지 않다면 이 설치 화면이 표시되지 않았을 것입니다).
  - 일반적으로 WiFi는 사용되지 않고, 네트워크 케이블이 필요한 경우에도 금방 연결을 끊을 것이기 때문에 WiFi 성능 향상도 마찬가지로 필요하지 않습니다.

#### 설치 타입

![img](../../static/img/get-started/air-gap/20-installation-type.png)

**Erase disk and install Ubuntu**를 선택합니다. 이 컴퓨터에 보관해야 할 다른 항목이 없으며, 다른 운영 체제나 작동하는 디스크가 없다는 것은 이미 확인했기 때문입니다.

:::caution

에어 갭 설치는 이중 부팅 환경의 일부가 되어서는 안 됩니다. 이중 부팅 환경에는 피할 수 없는 보안 위험이 존재하기 때문입니다.

:::

**Continue**를 누르기 전에 파일을 암호화하도록 선택한 경우:

##### (선택 사항) 암호화를 위한 하드 드라이브 설정

![img](../../static/img/get-started/air-gap/30-encrypt-disk.png)

*Erase disk* 옵션 아래에 있는 **Advanced Features** 버튼을 누릅니다. 처음에는 *None selected* 라고 표시될 것입니다.

  - **Use LVM with the new Ubuntu installation** 을 선택합니다.
  - 그 아래에 있는 **Encrypt the new Ubuntu installation for security** 옵션을 선택하십시오.

이제 Advanced option에서 ***LVM and encryption selected***라고 표시되지 않는 한 **Continue** 버튼을 누르지 마십시오.

![img](../../static/img/get-started/air-gap/35-disk-encrypted.png)

이전에 준비한 비밀번호를 **volume decryption key**로 입력하십시오.

  - 이 시점에서 비밀번호를 올바르게 입력할 수 있는지 확인해야 합니다: 메모로 적어놓거나, 기억할 수 있는 비밀번호를 사용하는 방식으로 일관성을 유지해야 합니다.
  - 해당 설치 환경에서 다시 확인하고 싶다면, 텍스트 편집기 아이콘이 있는 왼쪽("dock")로 이동해서 비밀번호를 몇 번 입력하는 연습을 해도 좋습니다.

#### 완료 & 재부팅

설치 드라이브를 확인하고, **Install now** 와 **Continue** 버튼을 클릭합니다.

  - 나머지 옵션(사용자 이름 및 정보, 로그인 방법 등)은 사용자의 성향에 따라 설정할 수 있습니다.

Ubuntu 설치가 완료되면 설치 미디어를 제거하고 재부팅하라는 메세지가 표시됩니다. 재부팅할 때 이전에 본 적 없는 두 가지를 볼 수 있습니다.

  - 위와 같은 권장 사항을 따라 하나의 디스크에 하나의 단일 OS만 설치한 경우 표시되는 메뉴([GRUB](https://help.ubuntu.com/community/Grub2))에는 단 한 가지 선택 사항인 **Ubuntu**만이 남아 있을 것입니다. 
  - Ubuntu 시스템에 대한 암호화 옵션을 선택한 경우 해당 시스템을 시작할 때마다 암호화 비밀번호를 입력해야 합니다.

### 보안 권장 사항에 따른 Ubuntu 설정

"Welcome to Ubuntu" 화면(신규 사용자는 *강제로* 상호작용해야 함)에서, 제공하는 **모든 것**을 거절하십시오.

  - 온라인 계정 없음
  - 정식 Livepatch 없음
  - 어떤 시스템 정보도 내보내지 않음
  - 위치 서비스 없음

#### 명령줄의 기본 보안 강화

##### 일상적인 네트워크 액세스가 필요한 패키지 제거:

``` bash
sudo apt remove cups
sudo apt remove unattended-upgrades
```

##### (선택 사항) Snap 소프트웨어 하위 시스템 제거

[Snap](https://snapcraft.io)은 ([AppImage](https://appimage.org)와 [Flatpak](https://flatpak.org) 같이) 소스에서 컴파일 할 필요가 없거나 OS 자체화 함께 제공되는 라이브러리 같이 보안 검사를 받을 필요 없는 라이브러리와 어플리케이션 구성 요소를 연결하기 때문에, 보안 상의 이유에서 의문점이 생기는 요소입니다.

Ubuntu 설치 미디어의 기본 snap은 동일한 릴리스의 기본 패키지와 동일한 보안 출처를 가지고 있기 때문에, Snap 제거는 선택 사항입니다. 그러나 Snap은 이 절차의 다음 단계에서도 업그레이드되고, 이렇게 업그레이드된 Snap은 동일한 보안 심사에 영향을 받지 않을 수 있습니다.

Snap 제거를 진행하려면 다음 지침을 따르십시오(정확한 절차는 자주 변경되며, 이러한 지침은 최신으로 아주 잘 관리되고 있음).

  - **[How do I turn off snap in Ubuntu?](https://linuxhint.com/turn-off-snap-ubuntu/)**

#### 시스템 소프트웨어와 모든 패키지를 현재 시간으로 업데이트

이렇게 하면 설치 미디어에서 받은 것으로부터 시스템의 모든 것이 업그레이드됩니다.

``` bash
sudo apt update
sudo apt upgrade
```

#### 파일/폴더/텍스트 문서 암호화를 위한 최소한의 패키지 설치 

##### (선택 사항) LibreOffice 설치

이는 에어 갭과 컴퓨터 호스트 환경 사이를 *양방향으로* 이동할 수 있는 비밀번호로 암호화된 노트를 작성할 수 있는 수단을 제공하므로, 설치가 권장되는 패키지입니다. 이를 통해 다음과 같은 것들을 할 수 있습니다.

  - ([안전한 작업 흐름](./secure-workflow)에 따라)에어 갭에서 사용하기 위해 가정용 컴퓨터 환경 및 인터넷에 연결된 시스템으로부터 트랜잭션의 세부 정보를 기록하는 것.
      - Cardano 계정 잔액, UTxO 주소 및 지불 주소
      - 에어 갭 내에서 수행할 작업에 대한 개인 파일 및 웹사이트의 메모(인터넷에 액세스할 수 없기 때문에)
  - 에어 갭을 통해 따로 업로드할 수 없으므로, 에어 갭 환경에서의 메모(문제, 오류 메세지)를 작성하여 컴퓨터에 복사하는 것.

비밀번호와 함께 저장된 LibreOffice 문서는 해당 비밀번호에서 파생된 키로 완전히 AES 암호화되어, 파일 및 데이터에 대해 가장 상업적으로 사용 가능한 보안을 구성합니다.

설치하려면 다음 명령어를 입력하십시오.

``` bash
sudo apt install libreoffice
```

#### 암호화 아카이버 설치

개발자든 스테이크 풀 운영자든 어느 시점에서 파일 및 폴더를 암호화하여 스테이크 풀 또는 응용 프로그램 서버에서 내보낼 수 있도록 해야 합니다. 여기서 LibreOffice는 일반적으로 실행되지 않지만, 설치 명령어 `p7zip` 를 대신 사용할 수 있습니다.

``` bash
apt install p7zip-full p7zip-rar
```

추가 패키지인 `p7zip-rar` 를 추가하면 파일 관리자(`nautilus`)에서 암호화 및 압축 옵션으로 파일을 저장할 수 있습니다.

#### 보안 삭제 도구 설치

암호화되지 않은 파일이 재구성되면 자금 또는 Cardano 기업의 손실로 이어질 수 있는 모든 흔적을 지워야 할 수도 있습니다. 따라서 파일 및 해당 메타데이터 또는 드라이브 컨텐츠 및 빈 디스크 공간을 영구삭제(zero-write)할 수 있는 도구를 설치해야 합니다.

``` bash
apt install secure-delete
```

### 다시 재부팅

이렇게 하면 시스템 소프트웨어 업데이트 후 시스템이 제대로 시작되는지 확인할 수 있습니다.

### `cardano-cli` 설치

아래 개발자 포털에서 표준 지침을 따르십시오.
Use the standard instructions here at the Developer Portal:

  - **[소스로부터 cardano-node 및 cardano-cli 설치](../get-started/installing-cardano-node)**

이는 `cardano-cli` 뿐만 아니라 `cardano-node` 도 빌드할 것이지만, 걱정은 마십시오: 에어 갭에서 노드를 실행할 일은 없을 것입니다. 😜 

### 인터넷에서 영원히 연결 해제

"영원히"의 정의는 인터넷 위협과 이러한 위혀비 OS 패키지 레퍼지토리 등에서 올 수 있다는 것에 대한 각자의 이해에 맡기도록 하겠습니다. 

  - 6개월 간격으로 소프트웨어 업데이트(예: Ubuntu "포인트 릴리스")는 해당 기간 동안 식별된 보안 문제를 패치하고 *새로운* 보안 문제를 일으킬 수 있는 새 소프트웨어를 설치합니다.
  - Ubuntu 또는 다른 버전의 Linux에서 패키ㅣ 업그레이드에 의도적으로 배치된 스파이웨어 또는 백도어는 일반적으로 설치 미디어를 빌드하는 데 사용되는 패키지에 쉽게 배치될 수 있습니다.

### 실수로 인터넷에 연결되지 않도록 하기 위한 주의사항

#### BIOS 설정: WiFi 및 이더넷 연결 사용 안함

실수로(또는 해킹으로 인해) 켜지지 않도록 매우 낮은 수준에서 네트워크 어댑터를 비활성화하기 위해 BIOS에 들어가는 방법을 알려면, 각자의 컴퓨터 지침을 확인하십시오.

  - BIOS 설정이 없는 경우 일반적으로 노트북을 열어 WiFi 카드에 대한 리드를 제거하거나 연결을 끊는 방식으로 노트북에서 WiFi를 쉽게 비활성화할 수 있습니다.

#### Ubuntu를 [비행기 모드](https://help.ubuntu.com/stable/ubuntu-help/net-wireless-airplane.html)로 설정

이렇게 하면 모든 블루투스 서비스와 WiFi가 비활성화되고, 화면 오른쪽 상단 모서리에 비행기 아이콘이 표시됩니다.

비행기 모드가 항상 켜져 있으면, (우연히 연결될 수 있는 WiFi와 달리)네트워크 액세스를 위해 인터넷 케이블이 연결되어 있어야 합니다.

#### 컴퓨터의 WiFi MAC 주소를 인터넷 라우터의 블랙리스트로 추가

일부 라우터는 DHCP에 의한 IP 주소가 제공되지 않는 MAC 주소 목록을 유지합니다. 이는 네트워크 인터페이스가 수동으로 구성되지 않는 한, 목록 내 주소들을 인터넷에서 격리시킵니다.

따라서 [WiFi MAC 주소를 찾아](https://help.ubuntu.com/stable/ubuntu-help/net-macaddress.html.en) 라우터의 블랙리스트(일반적으로 DNS, DHCP 또는 LAN 설정)에 추가할 수 있습니다.

### 축하합니다! 에어 갭 환경이 완성되었습니다!

이제 [안전한 트랜잭션 작업 흐름](./secure-workflow)에 사용할 수 있는 안전한 장소가 생겼습니다.

## 옵션 2: 영구 USB 장치에 에어 갭 환경 설치

:::caution

Linux 베테랑 전용입니다\! (그렇지 않다면, [옵션 1을 따르십시오](#옵션-1:-독립형-컴퓨터에-에어-갭-환경-설치).)

:::

이 옵션은 보다 까다로운 사용자, 특히 다음과 같은 사용자에게 적합할 수 있습니다.
  
  - 여행을 많이 하고 "이동 중" Cardano 운영을 유지해야 하는 사람
  - 호스트 컴퓨터의 모든 파일에 직접 액세스할 수 있는 에어 갭 환경에서 편리하게 부팅하고 싶은 사용자(설치 프로그램에 쓰는 USB 드라이브에서 부팅할 때처럼)
  - 암호화되지 않은 파일을 에어 갭 안팎으로 전송하기 위해 USB 드라이브를 사용하는 대신, 동일한 USB 드라이브를 사용하여 암호화된 파일을 저장하는 동시에, 동일한 부팅 방법을 지원하는 모든 시스템에서 사용할 수 있는 Cardano CLI를 제공하는 것을 원하는 사용자
  - 에어 갭 환경에서 호스트 컴퓨터로 직접 백업 혹은 키, 비밀번호, 또는 다른 기록들을 만들고자 하는 사용자

만약 이런 것들이 더 마음에 들고, 복잡하고 오류가 발생하기 쉬운 설치 절차를 꺼려하지 않는다면 부팅 가능한 USB 드라이브에 에어 갭 환경을 대신 설치할 수 있습니다. 그런 다음 이 드라이브에서 컴퓨터를 부팅하여 보안 리소스와 `cardano-cli` 에 액세스하고, 컴퓨터에 설치되어 있을 수 있는 모든 악성 소프트웨어는 물론 인터넷으로부터도 해당 컴퓨터를 격리할 수 있습니다.

이 문서화된 구성을 **Frankenwallet**이라고 합니다. 아래 링크에는 대부분 위에서 설명된 절차를 따르면서, 보안 및 블록체인 작업 흐름에서 부팅 가능한 USB 환경을 사용하기 위한 의미 체계를 포함하는 별도의 지침이 존재합니다.

  - **[The Frankenwallet](https://cosd.com/frankenwallet)**

:::warning

*Frankenwallet*의 절차는 개발자 포털 외부에 있습니다(해당 포털의 소유자에 의해 유지관리되거나, 승인되지 않은 문서입니다).

또한 "이중 부팅" Linux 설치 및 사용자 지정 OS 및 부팅 구성에 대한 경험이 없다면 위 지침을 따르기가 어렵거나 안전하지 않을 수 있습니다.

:::
